(this.webpackJsonptask=this.webpackJsonptask||[]).push([[0],{20:function(e,t,a){e.exports=a.p+"static/media/pacman.01125eaa.svg"},31:function(e,t,a){e.exports=a(44)},36:function(e,t,a){},37:function(e,t,a){},44:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(17),s=a.n(c),o=(a(36),a(12)),l=a(1),i=(a(37),a(4)),u=a.n(i),m=a(9),p=a(16),d=a(8),f=a(20),g=a.n(f),h=function(e){return function(){var t=Object(m.a)(u.a.mark((function t(a){var n,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"ToggleLoading"}),a({type:"toggleSearched",searched:!1}),a({type:"initPage"}),t.next=5,fetch("https://api.themoviedb.org/3/trending/movie/day?api_key=6387ef21dc196070b8bf74183b7fc49d&page=".concat(e));case 5:return n=t.sent,t.next=8,n.json();case 8:r=t.sent,a({type:"init",result:r.results,hasMore:e<r.total_pages}),a({type:"ToggleLoading"});case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},v=function(){return{type:"initPage"}},b=function(e,t){return function(){var a=Object(m.a)(u.a.mark((function a(n){var r,c;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n({type:"ToggleLoading"}),n({type:"toggleSearched",searched:!0}),n({type:"initPage"}),a.next=5,fetch("https://api.themoviedb.org/3/search/movie?api_key=6387ef21dc196070b8bf74183b7fc49d&query=".concat(e,"&page=").concat(t));case 5:return r=a.sent,a.next=8,r.json();case 8:c=a.sent,console.log(c),n({type:"ToggleLoading"}),n({type:"searchForMovie",result:c.results,hasMore:t<c.total_pages});case 12:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},E=function(e){var t=e.movie;return r.a.createElement("div",{className:"card"},r.a.createElement("img",{className:"card--image",src:t.poster_path?"https://image.tmdb.org/t/p/w185_and_h278_bestv2/".concat(t.poster_path):"https://images.unsplash.com/photo-1594322436404-5a0526db4d13?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=715&q=80",alt:t.title+" poster"}),r.a.createElement("div",{className:"card--content"},r.a.createElement("h3",{className:"card--title"},t.title.length>20?r.a.createElement("span",null,t.title.slice(0,20),"..."):t.title),r.a.createElement("p",{className:"card--stat"},r.a.createElement("small",null,"Release: ",t.release_date),"  ",r.a.createElement("small",null,"RATING: ",t.vote_average)),r.a.createElement("p",{className:"card--desc"},t.overview.length>100?r.a.createElement("span",null,t.overview.slice(0,100),"..."):t.overview)))},j=function(){var e=Object(d.b)(),t=Object(n.useState)(""),a=Object(p.a)(t,2),c=a[0],s=a[1],l=Object(d.c)((function(e){return e.data})),i=Object(d.c)((function(e){return e.page})),f=Object(d.c)((function(e){return e.loading})),j=Object(d.c)((function(e){return e.hasMore})),y=Object(d.c)((function(e){return e.searched})),O=Object(n.useRef)(),w=Object(n.useCallback)((function(t){f||(O.current&&O.current.disconnect(),O.current=new IntersectionObserver((function(t){t[0].isIntersecting&&j&&e({type:"incrementPage"})}),{threshold:.5}),t&&O.current.observe(t))}),[f,j]);Object(n.useEffect)((function(){e(h(1))}),[]),Object(n.useEffect)((function(){i>1&&e(function(e,t){return function(){var a=Object(m.a)(u.a.mark((function a(n){var r,c,s,o;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n({type:"ToggleLoading"}),0!==e.length){a.next=11;break}return a.next=4,fetch("https://api.themoviedb.org/3/trending/movie/day?api_key=6387ef21dc196070b8bf74183b7fc49d&page=".concat(t));case 4:return r=a.sent,a.next=7,r.json();case 7:c=a.sent,n({type:"addElements",result:c.results,hasMore:t<c.total_pages}),a.next=18;break;case 11:return a.next=13,fetch("https://api.themoviedb.org/3/search/movie?api_key=6387ef21dc196070b8bf74183b7fc49d&query=".concat(e,"&page=").concat(t));case 13:return s=a.sent,a.next=16,s.json();case 16:o=a.sent,n({type:"addElements",result:o.results,hasMore:t<o.total_pages});case 18:n({type:"ToggleLoading"});case 19:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(c,i))}),[i]);var x=function(){var t=Object(m.a)(u.a.mark((function t(a){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.preventDefault(),e(v),0===c.length?e(h(1)):e(b(c,1));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{className:"form",onSubmit:x},r.a.createElement("label",{className:"label",htmlFor:"query"},"Movie Name"),r.a.createElement("input",{className:"input",type:"text",name:"query",placeholder:"i.e. Avengers",value:c,onChange:function(e){s(e.target.value)}}),r.a.createElement("input",{type:"submit",className:"button",value:"Search"})),r.a.createElement("h4",{className:"res_title"},y?"Related Search Results":"Trending Today"),r.a.createElement("div",{className:"card-list"},l.length>0&&l.map((function(e,t){return t+1===l.length?r.a.createElement("div",{ref:w,key:t},r.a.createElement(o.b,{to:"/movie/".concat(e.id)},r.a.createElement(E,{movie:e}))):r.a.createElement("div",{key:t},r.a.createElement(o.b,{to:"/movie/".concat(e.id)},r.a.createElement(E,{movie:e})))}))),f?r.a.createElement("div",{className:"loading"},r.a.createElement("img",{src:g.a,alt:"loader"})):null)},y=function(){var e=Object(l.f)().id,t=Object(n.useState)(!1),a=Object(p.a)(t,2),c=a[0],s=a[1],o=Object(n.useState)(null),i=Object(p.a)(o,2),d=i[0],f=i[1];return Object(n.useEffect)((function(){s(!0);var t="https://api.themoviedb.org/3/movie/".concat(e,"?api_key=6387ef21dc196070b8bf74183b7fc49d");Object(m.a)(u.a.mark((function e(){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t);case 3:return a=e.sent,e.next=6,a.json();case 6:n=e.sent,console.log(n),f(n),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0.message);case 14:return e.prev=14,s(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[0,11,14,17]])})))()}),[]),r.a.createElement("div",{className:"center"},!c&&d?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"movie"},r.a.createElement("div",{className:"movie_poster"},r.a.createElement("img",{src:d.poster_path?"https://image.tmdb.org/t/p/w185_and_h278_bestv2/".concat(d.poster_path):"https://images.unsplash.com/photo-1594322436404-5a0526db4d13?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=715&q=80"})),r.a.createElement("div",{className:"movie_details"},r.a.createElement("h3",null,d.original_title," ",r.a.createElement("span",null,"(",d.release_date.slice(0,4),")")),r.a.createElement("p",{className:"movie_details-info"},r.a.createElement("span",null,d.release_date),r.a.createElement("span",{className:"dot"}),r.a.createElement("span",null,d.genres.map((function(e,t){return t+1===d.genres.length?e.name:e.name+", "}))),r.a.createElement("span",{className:"dot"}),r.a.createElement("span",null,d.runtime,"mins")),r.a.createElement("h4",{className:"movie_details-overview"},"overview"),r.a.createElement("p",null,d.overview)))):r.a.createElement("img",{className:"loader__movieDetails",src:g.a,alt:"loader"}))};var O=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(o.a,null,r.a.createElement(l.c,null,r.a.createElement(l.a,{path:"/movie/:id",component:y}),r.a.createElement(l.a,{path:"/",component:j}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var w=a(13),x=a(30),_=a(25),N=a(3),k={data:[],page:0,loading:!1,hasMore:!0,searched:!1};var M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"init":case"searchForMovie":return Object(N.a)(Object(N.a)({},e),{},{data:t.result,hasMore:t.hasMore});case"initPage":return Object(N.a)(Object(N.a)({},e),{},{page:1});case"incrementPage":return Object(N.a)(Object(N.a)({},e),{},{page:e.page+1});case"addElements":var a=Object(N.a)(Object(N.a)({},e),{},{data:[].concat(Object(_.a)(e.data),Object(_.a)(t.result)),hasMore:t.hasMore});return a;case"ToggleLoading":return Object(N.a)(Object(N.a)({},e),{},{loading:!e.loading});case"toggleSearched":return Object(N.a)(Object(N.a)({},e),{},{searched:t.searched});default:return e}},T=w.c,S=Object(w.d)(M,T(Object(w.a)(x.a)));s.a.render(r.a.createElement(d.a,{store:S},r.a.createElement(O,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[31,1,2]]]);
//# sourceMappingURL=main.6b060dc6.chunk.js.map